DECLARE @CurrentMigration [nvarchar](max)

IF object_id('[dbo].[__MigrationHistory]') IS NOT NULL
    SELECT @CurrentMigration =
        (SELECT TOP (1) 
        [Project1].[MigrationId] AS [MigrationId]
        FROM ( SELECT 
        [Extent1].[MigrationId] AS [MigrationId]
        FROM [dbo].[__MigrationHistory] AS [Extent1]
        WHERE [Extent1].[ContextKey] = N'IdentityFramework.Migrations.Configuration'
        )  AS [Project1]
        ORDER BY [Project1].[MigrationId] DESC)

IF @CurrentMigration IS NULL
    SET @CurrentMigration = '0'

IF @CurrentMigration < '201903172058579_idFrameworkInitialDbo'
BEGIN
    CREATE TABLE [dbo].[AspNetRoles] (
        [Id] [nvarchar](128) NOT NULL,
        [Name] [nvarchar](256) NOT NULL,
        CONSTRAINT [PK_dbo.AspNetRoles] PRIMARY KEY ([Id])
    )
    CREATE UNIQUE INDEX [RoleNameIndex] ON [dbo].[AspNetRoles]([Name])
    CREATE TABLE [dbo].[AspNetUserRoles] (
        [UserId] [nvarchar](128) NOT NULL,
        [RoleId] [nvarchar](128) NOT NULL,
        CONSTRAINT [PK_dbo.AspNetUserRoles] PRIMARY KEY ([UserId], [RoleId])
    )
    CREATE INDEX [IX_UserId] ON [dbo].[AspNetUserRoles]([UserId])
    CREATE INDEX [IX_RoleId] ON [dbo].[AspNetUserRoles]([RoleId])
    CREATE TABLE [dbo].[AspNetUsers] (
        [Id] [nvarchar](128) NOT NULL,
        [Email] [nvarchar](256),
        [EmailConfirmed] [bit] NOT NULL,
        [PasswordHash] [nvarchar](max),
        [SecurityStamp] [nvarchar](max),
        [PhoneNumber] [nvarchar](max),
        [PhoneNumberConfirmed] [bit] NOT NULL,
        [TwoFactorEnabled] [bit] NOT NULL,
        [LockoutEndDateUtc] [datetime],
        [LockoutEnabled] [bit] NOT NULL,
        [AccessFailedCount] [int] NOT NULL,
        [UserName] [nvarchar](256) NOT NULL,
        CONSTRAINT [PK_dbo.AspNetUsers] PRIMARY KEY ([Id])
    )
    CREATE UNIQUE INDEX [UserNameIndex] ON [dbo].[AspNetUsers]([UserName])
    CREATE TABLE [dbo].[AspNetUserClaims] (
        [Id] [int] NOT NULL IDENTITY,
        [UserId] [nvarchar](128) NOT NULL,
        [ClaimType] [nvarchar](max),
        [ClaimValue] [nvarchar](max),
        CONSTRAINT [PK_dbo.AspNetUserClaims] PRIMARY KEY ([Id])
    )
    CREATE INDEX [IX_UserId] ON [dbo].[AspNetUserClaims]([UserId])
    CREATE TABLE [dbo].[AspNetUserLogins] (
        [LoginProvider] [nvarchar](128) NOT NULL,
        [ProviderKey] [nvarchar](128) NOT NULL,
        [UserId] [nvarchar](128) NOT NULL,
        CONSTRAINT [PK_dbo.AspNetUserLogins] PRIMARY KEY ([LoginProvider], [ProviderKey], [UserId])
    )
    CREATE INDEX [IX_UserId] ON [dbo].[AspNetUserLogins]([UserId])
    ALTER TABLE [dbo].[AspNetUserRoles] ADD CONSTRAINT [FK_dbo.AspNetUserRoles_dbo.AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [dbo].[AspNetRoles] ([Id]) ON DELETE CASCADE
    ALTER TABLE [dbo].[AspNetUserRoles] ADD CONSTRAINT [FK_dbo.AspNetUserRoles_dbo.AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [dbo].[AspNetUsers] ([Id]) ON DELETE CASCADE
    ALTER TABLE [dbo].[AspNetUserClaims] ADD CONSTRAINT [FK_dbo.AspNetUserClaims_dbo.AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [dbo].[AspNetUsers] ([Id]) ON DELETE CASCADE
    ALTER TABLE [dbo].[AspNetUserLogins] ADD CONSTRAINT [FK_dbo.AspNetUserLogins_dbo.AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [dbo].[AspNetUsers] ([Id]) ON DELETE CASCADE
    CREATE TABLE [dbo].[__MigrationHistory] (
        [MigrationId] [nvarchar](150) NOT NULL,
        [ContextKey] [nvarchar](300) NOT NULL,
        [Model] [varbinary](max) NOT NULL,
        [ProductVersion] [nvarchar](32) NOT NULL,
        CONSTRAINT [PK_dbo.__MigrationHistory] PRIMARY KEY ([MigrationId], [ContextKey])
    )
    INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
    VALUES (N'201903172058579_idFrameworkInitialDbo', N'IdentityFramework.Migrations.Configuration',  0x1F8B0800000000000400DD5CDB6EE436127D5F60FF41D05376E1B47CC90C668D7602A76DEF1A195F30ED09F236604BECB63012A548946363912FDB877C527E618B1275E14D976EB9BB1D0C306891C553C562912C168BFEF37F7F4C7F780E03EB0927A91F9133FB6872685B98B891E793D5999DD1E5B71FEC1FBEFFFBDFA6975EF86CFD5CD29D303A6849D233FB91D2F8D47152F71187289D84BE9B4469B4A413370A1DE445CEF1E1E1BF9CA3230703840D589635FD9411EA8738FF80CF59445C1CD30C0537918783949743CD3C47B56E5188D318B9F8CCBEF630B4A52F570994FD16255F27451BDB3A0F7C04F2CC71B0B42D4448441105694F3FA7784E9388ACE63114A0E0E125C640B744418A792F4E6BF2BE1D3A3C661D72EA8625949BA5340A07021E9D700D3972F3B5F46C571A041D5EE6FA62BDCEF558ABF0531480026486A7B32061C467F64DC5E23C8D6F319D940D2797D21034110FACDEED0E2A8B3A9E1CB27F07D62C0B6896E03382339AA0E0C0BACF1681EFFE845F1EA2AF989C9D1C2D96271FDEBD47DEC9FBEFF0C9BB664FA1AF40271440D17D12C53801D9F0B2EABF6D39623B476E58356BB429B402B60493C3B66ED0F3474C56F411A6CDF107DBBAF29FB1579670E3FA4C7C984BD08826197CDE6641801601AEEA9D569EECFF16AEC7EFDE8FC2F5163DF9AB7CE825FE30711298579F7090D7A68F7E5C4C2F61BCBF70B2AB240AD9B7685F45ED977994252EEB4C64247940C90A5351BAA9531B6F2F936650E39B7589BAFFA6CD2455CD5B4BCA3AB4CE4C28596C7B3694F2BE2EDFDE16771EC73078B969318DB4199C69CB9A4818079642599BD1515F3322D0BDBFF2AA7819223F186159ECC105FC92A59F84B8EAE58F111821228365BE47690AC3E9FD07A58F2DA2C3CF11449F63374BC088E61485F1AB73BB7F8C08BECDC2059B03DBE335DAD03CFC165D219746C92561AD36C6FB18B95FA38C5E12EF0251FC99BA2520FB7CF0C3FE00A38873EEBA384DAFC098B1378BC0ED2E01AF093D391E0CC796A95DBB25B300F9A1DE2F9116D42F2569ED9BE82914FFC440A6F351DA44FD18AD7CD24FD492D42C6A41D1292A271B2A2A03EB2729A7340B9A1374CA59508DE6F5E52334BEDB97C3EEBFDFB7D9E66D5A0B1A6A9CC30A89FF8D094E6019F3EE11A53821F508F4593776E12CE4C3C798BEFADE9473FA1905D9D8ACD69A0DF92230FE6CC861F77F36E46242F193EF31AFA4C761A82406F85EF4FA7356F79C9324DBF67410BAB96DE6DB59034CD3E53C4D23D7CF6781260CC68318A2FCE0C359DD118DA2377254043A0686EEB32D0F4AA06FB66C5477E402079862EBDC2DC2843394BAC853D5081DF2060856EEA81AC1EAE88828DC3F159E60E938618D103B04A530537D42D569E113D78F51D0A925A965CF2D8CF5BDE221D75CE01813C6B053137D98EB83214C808A8F34285D1A9A3A0D8B6B374483D76A1AF32E17B61E772546B1159BECF09D0D76C9FDB75731CC768D6DC138DB55D2470063606F1706CACF2A7D0D403EB8EC9B814A2726838172976A2B062A6A6C07062AAAE4CD19687144ED3BFED27975DFCC533C286F7F5B6F55D70E6C53D0C79E9966E17B421B0A2D70A29AE7C58255E267AA399C819CFC7C967257573611063EC7540CD9D4FEAED60F75DA4164236A03AC0DAD03945F092A40CA841A205C19CB6B958E7B110360CBB85B2B2C5FFB25D8860DA8D8CDABD106A1F9025536CE5EA78FAA6795352846DEEBB0D0C0D11884BC78891DEFA114535C56554C1F5F788837DCE8181F8C16057578AE0625959D195D4BA569766B49E7900D71C936D292E43E19B4547666742D711BED5692C62918E0166CA422710B1F69B295918E6AB7A9EAA64E9137C50BA68E21C16A7A83E2D827AB46C2152FB1E645B6D5ECDBF9F004A4B0C070DC54938754495B71A251825658AA05D620E9959FA4F40251B4402CCE33F342854CBBB71A96FF926573FB5407B1DC074A6AF65B5CDB958B7C61C7555D128E04CD5621F36BF260BAC60AF4CD2D960687029468E2F7B328C8426276B3CCAD8B5BBC66FBA24445983A92FC8A1BA5E84C7176C501E8353CEAD41875A82A5F66FDE1324398945E7AA24DB59BBC53334A19AC6AA29802583B1B3E9353B3C690C95EE3F011EB44789D39C653559A00BC68204623DB41016BD4F5471513529A98624D7F4429EBA40929550D90B2995B2208D9AC580BCFA0513D457F0E6A3649135DADED8FACC92B69426BAAD7C0D6C82CD7F547D5A49E348135D5FDB1EB3C147929DDE35DCC7896D9701B2B0EBD9BED63068CD75917C7D9061B77FB4DA046F1402C7E7BAF80F1F2BDB429E3C96F439B2A221E9BD99401C3BC0A0977E3E222D47AA16FC6142EBC8585BEEDC2DF8C37CC725FD53E94E39F4C5271AF8E81D2716FCA8F5EDD8F6E94B35841625BA51A61937F49290E278C6032FF3598053E664B7A49708388BFC4292D923CECE3C3A363E9C5CEFEBC9E71D2D40B344757D3131A71CCB690AF459E50E23EA244CD9ED8E085490DAA04A6AF89879FCFECFFE6AD4EF31807FB95171F58D7E967E2FF9A41C5439261EB77351B749C8CFB1E6F3C2A417F7F138F27FAABFCFA972F45D303EB2E81E9746A1D4A8A5E67F8C5271583A4299A6E20CDDA0F2DDEEE6C135E2E6851A5D9B2FE4385854F4779A4504AF94D889EFF315434ED43848D10358F0DC6C21B4585A6C704EB60191F1278F049F38704C33AAB7F58B08E68C647053E190E263F29E8BF0C952D77B80F698E4DDB5892723D77A6646F949FB9EBBD49C9DCDE68A2ABD9D903E046CDC0DECC45796399CDA36D9D9AC4E5D1B07769F7AF9EADBC2F09CAB5D3BEDBBCE46DA622B75C31FDA53290F720674E9303B4FB3CE36DDB9A290EBCE7C99AC3B289F7CCD8F836BFFB9CE16D1B9B2940BCE7C636283378CF6C6D57FBE78E2DADF716BAF33C5F3565C9709FA38B2277E5F116217738FE2F223082C2A32C9E5FEA13C74CCC6A633132AC49CC4CCD196B326365E2287C158A76B6C3FACA37FCD6CE729A76B6863CCF36DE7CFD6FE5CD69DA791BB227779181ACCD5FD4658577AC636D09556F29E358E84947827B97CFDA7A39FF96128C47518A307B0CB7CB6F279F7814958C397506E40FAB17C5B07736FE8623ECDFA9BFAA21D85F7424D81576CD8AE69A2CA372F396242A49A408CD0DA6C8832DF53CA1FE12B914AA59003A7F3F9E07F5D835C8027BD7E42EA37146A1CB385C0442C08B39016DFCF3246951E6E95DCCBED231BA0062FA2C707F477ECCFCC0ABE4BED2C4840C10CCBBE0E15E369694857D572F15D26D447A0271F5554ED1030EE300C0D23B32474F781DD9C0FC3EE215725FEA08A009A47B2044B54F2F7CB44A5098728CBA3D7C820D7BE1F3F7FF0700FFEB4BCA540000 , N'6.2.0-61023')
END

